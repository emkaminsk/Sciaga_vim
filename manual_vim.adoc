= Manual/ściąga do Vim

Dokument zawiera skrót poleceń do Vim i oczywiście powstał w całości w tym edytorze :). Opisane są podstawowe polecenia w trybie poleceń, normalnym, wizualnym i inne. Jest to ekstrakt wiedzy z plików pomocy uzupełniony o wskazówki dotyczące "języka VIM". Spis treści do pełnej pomocy dostępny jest po wykonaniu w Vim polecenia ':help usr_toc'. Tutorial można uruchomić w powłoce poleceniem 'vimtutor' w shellu.

Autor: emkaminsk@gmail.com.

'''

Vi powstał jako 'visual interface' do innego edytora _ex_. _Ex_ był edytorem tekstu na teleksie, usłudze do przesyłania tekstu popularnej w latach 60-tych i 70-tych. Stąd tryb _ex_ w vi i stąd pochodzą polecenia _':'_, _'$'_, _'^',_ _'%'_, oznaczanie zakresu przez _'a,b'_, _'g'_, _'s'_, _'m'_ i inne.

Vim (VI iMproved) działa inaczej niż inne edytory tekstu. Podstawowe różnice to: 
* ogromna konfigurowalność programu. Dostępne polecenia można łączyć w rozliczone kombinacje oraz tworzyć nowe polecenia dla przyspieszenia swojej pracy z tekstem,
* koncentracja na pracy z klawiaturą przy minimalizacji roli myszki do wybierania poleceń,
* rozróżnienie pomiędzy trybami pracy edytora, w których możliwe jest wydawanie różnych poleceń. Co więcej, sama edycja tekstu jest możliwa jedynie w trybie edycji, do którego można wejść wydając określone polecenia. To może stanowić barierę wejścia dla początkującego.

Dlatego należy rozróżnić kilka trybów działania Vim:

* *normalny* - polecenia składające się z jednego lub kilku znaków lub kombinacji klawiszy,
* *edycji* - tryb w którym można edytować tekst. Można go rozpoznać po tym, że w dolnej linii ekranu wyświetla się tekst --- INSERT ---,
* *poleceń*, tzw cmd-line, w którym wprowadza i wykonuje się tzw. polecenia ex. Są to polecenia głównie rozpoczynające się od _:_, _/_, _?_ lub _!_,
* *wizualnej selekcji* (ang. visual mode),
* *wizualny*, w którym wpisywany tekst zastępuje tekst podświetlany (ang. select mode),
* *zastępowania* - tryb ten jest bardzo podobny do trybu edycji, ale każdy wpisany znak zastępuje znak na pozycji kursora.
* *ex*, który jest w istocie rozszerzonym trybem poleceń. Jest to tryb służący do pisania skryptów z poleceń stosowanych w trybie poleceń składających się z wielu linii.

Istnieje jeszcze jeden dość nietypowy tryb pracy programu:
* *zawieszenia* w oczekiwaniu na polecenie; Vim wchodzi w ten tryb w trakcie wpisywania polecenia w trybie normalnym, pomiędzy operatorem a ruchem/obiektem (patrz Język Vim poniżej).

W każdym z trybów można poruszać się po tekstcie za pomocą strzałek. Do wychodzenia z różnych trybów do trybu normalnego służy klawisz _Esc_, wyjątkiem jest tu tryb Ex, do wyjścia z niego należy wykonać komendę _:vi_.

== Wstęp

=== Podstawowe polecenia

Sekcja prezentuje kilka podstawowych poleceń służących do zapisu, zamknięcia pliku i korzystania z wbudowanej pomocy. Więcej o trybie poleceń w pliku :help cmdline.

[cols="1,1"]
|===
|_:_
|rozpoczyna polecenia w trybie poleceń. 

|_:w 'plik'_
|zapis pliku, opcjonalnie można podać nazwę nowego pliku

|_:q_
|wyjście z programu

|_:saveas 'plik'_
|zapis bieżącego pliku pod nową nazwa 'plik'

|_:file 'plik'_
|zmiana nazwy obecnie edytowanego pliku

|_:e 'nazwa'_
|(edit) otwarcie następnego pliku 'nazwa' do edycji

|_ZZ_
|zatrzymuje program (tworzy plik swp z niezachowanymi zmianami!)

|_CTRL-Z_
|zawiesza Vim (zachowując wszystko - ustawienia, pliki itp., jak zminimalizowanie okna w Windows) i przenosi do powłoki shell. Do Vim można wrócić poleceniem 'fg' w powłoce

|_:help_
|otwarcie pomocy

|_:help 'word'_
|pomoc z danym słowem lub poleceniem; <Tab> lub CTRL-D wyświetla możliwe opcje

|_:help index_
|spis wszystkich poleceń wraz z tagami i ich opisem

|_:help usr_01.txt_
|otwarcie pierwszego rozdziału podręcznika

|_:help usr_toc.txt_
|wyświetla spis treści podręcznika Vim

|_._
|powtórzenie wykonania poprzedniego polecenia wydanego w trybie normalnym.

|_CTRL-G_
|wyświetlenie podstawowych informacji: o nazwie pliku, numerze wiersza w którym jest kursor, procencie długości pliku od początku w którym stoi kursor

|===

=== Opcje (często dodanie 'no' przed nazwa opcji wyłącza ją)

Pełna lista opcji jest w pliku _options.txt_

[cols="1,1"]
|===
|_:set hls_
|włączenie podświetlania wyszukiwań

|_:nohlsearch_
|wyłączenie podświetlania

|_:set ic_
|włączenie trybu ignorecase wyszukiwania

|_:set number_
|włączenie numerów wierszy

|_:help 'hls'_
|pomoc na temat opcji hls

|_:set relativenumber_
|Włączenie trybu względnej numeracji. Numery linii wyswietlaja się względnie do pozycji kursora.

|_:set ve=all_
|Ustawia tryb virtualedit, w którym kursor może poruszać się gdziekolwiek (bez ograniczeń końcem linii itp.)

|===

=== Język VIM. 

Język składa się z kombinacji działania i przedmiotu. Działaniem (ang. operator) jest akcja, np. _d_ - delete (usuwanie), Przedmiotem może być: 
* obiekt np. _w_ - word (słowo) albo 
* ruch (ang. motion), np. _j_ (przejście linię w dół)
* funkcja. 
Obiekt i ruch można poprzedzić liczbą. *Siłę Vim* stanowi fakt, że dowolna kombinacja działania, liczebnika i przedmiotu  stanowi unikalne polecenie.

Przykłady: 
* _dw_ - usunięcie słowa. 
* _ctw_ - change to 'w' - zmiana całego tekstu do następnego wystąpienia 'w'
* _y2j_ - kopiuje do schowka bieżącą linię oraz dwie poniżej
* d:call search("Następny") - kasuje wszystko pomiędzy kursorem i następnym wystąpieniem słowa "Następny"

Więcej informacji (w tym np. bardziej kompletną listę operatorów i obiektów/ruchów) można znaleźć w pliku _motion.txt_ (_:help motion_). Więcej informacji o funkcjach jest w _:help usr_41.txt_.

==== Akcje na obiektach większych niż jeden znak
Zazwyczaj służą do usuwania i zmiany tekstu. Więcej - _:help operator_

[cols="1,1"]
|===
|_d_
|Delete - usuwanie i pozostanie w trybie normalnym

|_c_
|Change - zmiana i przejście do trybu edycji

|_>, <_
|Indent - wcięcie, unindent - zlikwidowanie wcięcia

|_y_
|Yank - kopiowanie

|_g~_, _gu_, _gU_
|Zmiana dużych liter na małe (g~ wykonuje zamianę, gu - zmienia wszystkie litery na małe, gU - na  duże).

|===

Polecenia takie, jak np. _d_, _c_ i _y_ można poprzedzić oznaczeniem rejestru (np. _"x_), dzięki czemu wynik polecenia zostanie skopiowany do tego rejestru. Więcej - patrz Rejestry poniżej.

==== Ruchy (motion). 

Definiują ruch do wykonania dla powyższych poleceń (np. _d_ czy _y_)

[cols="1,1"]
|===

|_$_
|Do końca linii

|_^, 0_
|Do początku linii

|_G_
|Go - do końca pliku

|_f, F, t, T_
|Find - do wystąpienia kolejnego znaku, np. fa - do kolejnego 'a'. Kapitalik - szukanie wstecz. T = To - do znaku, ale bez uwzględnienia tego znaku.

|_h, j, k, l_
|Ruch w lewo, dół, górę i w prawo. _15j_ Przykład ruchu - kolejne 15 linii. _10l_ to kolejny przykład ruchu - 10 znaków w prawo.

|===

Warto podkreślić, że dwie poprzednie sekcje (czynności, ich krotności i ruchy) można składać w dowolne kombinacje, np. 9 czynności * 10 krotności * 10 ruchów daje w sumie 900 unikalnych poleceń, a to ułamek możliwości Vim.

==== Obiekty tekstowe. 

Określenie obiektu tekstowego ma swoją składnię: pierwsza litera (opcjonalna) wskazuje:
* 'i' - czy obiekt jest 'exclusive', tj. bez spacji przed i po,
* 'a' - 'inclusive" - włącznie ze spacjami przed i po.
Użycie opcjonalnego określenia sprawia, że polecenie działa, gdy kursor jest gdziekolwiek w środku obiektu, niekoniecznie na jego początku.
* brak pierwszej litery oznacza, że działanie zostanie wykonane od miejsca kursora do końca obiektu.
Druga litera definiuje sam obiekt, np. _w_ - słowo.

[cols="1,1"]
|===

|_iw_
|Inner word - wewnątrz słowa; ogólnie 'a' w 'aw' oznacza obiekt razem ze spacjami dookoła niego, natomiast 'i' w 'iw' oznacza pominięcie spacji

|_aw_
|Word - słowo (razem ze spacjami)

|_ip_
|Inner paragraph - wewnątrz całego akapitu

|_as_
|A sentence - całe zdanie

|_it_
|Inner tag - wewnątrz np tagu HTML

|_i", i', i`_
|Inner quote - wewnątrz tekstu otoczonego cudzyslowiem danego typu.

|_i), i], i}, ib_
|Inner brackets - wewnątrz nawiasów (_tekst_)

|===

Podobnie jak z ruchami, akcje i obiekty można dowolnie ze sobą łączyć produkując kolejne setki (jeśli nie tysiące) możliwych unikalnych poleceń.

==== Tryb wizualny
Alternatywą dla składni operator - obiekt/ruch jest użycie trybu wizualnego. W tym trybie wpierw zaznacza się fragment tekstu, który zostaje podświetlony na ekranie, a potem wykonuje się akcję (operator).

[cols="1,1"]
|===
|_v_
|Visually select - zaznaczenie tekstu do zmiany 

Więcej opcji wejścia w ten tryb opisanych jest poniżej.
|===

==== Składnia polecenia złożonego

[cols="1,1"]
|===

|_xay_
|składnia: operator - liczba - obiekt/ruch

|_axy_
|a - liczba powtórzeń, x - operator, y - obiekt/ruch

|_axby_
|Gdy podane są dwie liczby (_a_ i _b_), polecenie wykonane zostanie _a*b_ liczbę razy.

|===

=== Działania na pojedynczych znakach

Mimo, że poniższe polecenia definiują czynności, nie przyjmują rzeczownika/obiektu do działania. Dlatego np. _'2x'_ jest skończonym poleceniem (kasuje dwa znaki poczynając od znaku pod kursorem).

[cols="1,1"]
|===

|_s_
|Substitute - zastępuje znak pod kursorem, po wykonaniu pozostaje w trybie wstawiania

|_r_
|Replace - zastępuje jeden znak pod kursorem, po wykonaniu pozostaje w trybie normalnym

|_x_
|Cross out - usuwa pojedynczy znak pod kursorem, po wykonaniu pozostaje w trybie normalnym


|===


== Polecenia w trybie normalnym

=== Zmiana widoku

[cols="1,1"]
|===
|_zz_
|wycentrowanie ekranu na wierszu, w którym jest kursor

|_zt_
|(top) ustawienie ekranu tak, że linia z kursorem jest na górze ekranu

|_zb_
|(bottom) jw. ale jest na dole
|===

=== Poruszanie kursorem 

Więcej pomocy w :help motion.txt

[cols="1,1"]
|===
|_h, j, k, l_
|poruszanie w czterech kierunkach (lewo, dół, góra, prawo)

|_^, 0_
|początek bieżącego wiersza

|_$_
|koniec bieżącego wiersza

|_w_
|(word) początek następnego słowa, polecenie złożone

|_b_
|(before, beginning) początek poprzedniego słowa

|_e_
|(end) przejście na koniec słowa

|_2G_
|(go) przeskok do drugiej linii, polecenie złożone

|_G_
|przeskok do ostatniej linii pliku

|_%_
|(gdy kursor wskazuje otwierający nawias) przeskok do zamykającego nawiasu

|_gg_
|przeskok na początek pliku (to samo co 1G)

|_``_
|powrót po przeskoku (cofnięcie do poprzedniej pozycji).

|_CTRL-O_
|(older) powrót do poprzedniego miejsca po przeskoku (np po przeskoku do innej linii lub po wejściu w link). Można wykonywać wiele razy.

|_CTRL-I_
|przejście do nowszej pozycji w odwrotnej kolejności jak CTRL-O

|_:jumps_
|wyświetlenie listy przeskoków

|_CTRL-]_
|wejście w link

|_H_
|(Home) przeniesienie kursora na górę strony

|_M_
|(Middle) przeniesienie kursora na środek strony

|_L_
|(Last) przeniesienie kursora na dół strony

|_CTRL-U_
|(up) przewinięcie o pół strony w górę

|_CTRL-D_
|(down) przewinięcie o pół strony w dół

|_CTRL-F_
|(forward) przewinięcie tekstu w przód o stronę

|_CTRL-B_
|(backward) przewinięcie tekstu w tył o stronę

|_CTRL-E_
|(extra) wyświetlenie dodatkowej linii (jedna linia w dół)

|_CTRL-Y_
|jedna linia w górę
|===

=== Wchodzenie w tryb edycji

[cols="1,1"]
|===

|_i_
|(insert) wstawienie znaku w bieżącym miejscu
|_I_
|wstawianie znaków na początku bieżącego wiersza

|_o_
|(open) rozpoczęcie następnego wiersza

|_O_
|rozpoczęcie nowego wiersza w bieżącym wierszu

|_a_
|(add) dodanie znaku zaraz za kursorem

|_A_
|wejście w edycję na końcu bieżącego wiersza

|_~_
|zmiana rozmiaru znaku (z dużego na mały i odwrotnie)

|===

=== Usuwanie i wycinanie

Więcej dostępnych poleceń służących do zmiany tekstu (usuwania, wstawiania, przesuwania, formatowania, sortowania) jest opisanych w pliku pomocy _:help change.txt_.

[cols="1,1"]
|===

|_x_
|usuwanie znaku pod kursorem (złożone)

|_d_
|(delete) wycinanie wiersza lub jego części - przeniesienie do schowka, polecenie złożone

|_dG_
|- od bieżącego wiersza do końca pliku

|_d20G_
|- od bieżącego wiersza do wiersza 20

|_D_
|wycinanie wiersza od pozycji kursora do końca linii (to samo co d$)

|_J_
|(join) łączenie dwóch wierszy że sobą - bieżącego i następnego

|===

=== Kopiowanie

[cols="1,1"]
|===

|_y_
|(yank) kopiowanie do schowka, polecenie złożone

|_Y_
|kopiowanie całego bieżącego wiersza

|_yy_
|to samo, działa jak Y

|_y$_
|kopiowanie od bieżącego znaku do końca linii

|===

=== Wklejanie

Więcej w pomocy - _:help insert.txt_

[cols="1,1"]
|===

|_p_
|(put) wklejanie zawartości schowka za kursorem lub poniżej bieżącego wiersza

|_P_
|wklejenie przed/powyżej bieżącego wiersza

|===

=== Korekta

[cols="1,1"]
|===

|_r_
|(replace), np. ra zastępuje bieżący znak pod kursorem przez literę 'a' i wraca d trybu poleceń

|_c_
|(change) korekta, polecenie złożone (składnia jak d czy y)

|_ce_
|(change to the end) pozwala skorygować bieżące słowo (usuwa je do końca i wchodzi w tryb edycji)

|_R_
|korekta wielu znaków (każdy napisany znak zastępuje znak pod kursorem). W tym trybie Backspace przywraca zmiany

|_s_
|(substitute) zamień znak pod kursorem (tożsame z cl)

|_xp_
|zamiana kolejności dwóch liter (poprawa szwedzkiego błędu)

|_@{a}_
|wykonywanie korekty za pomocą sekwencji klawiszy zapisanej w makrze. Patrz sekcja 'Makra'

|===


=== Modyfikatory poleceń złożonych

Patrz też sekcja 'Język VIM' powyżej. Przykłady poleceń służących do wycinania: _d_ oraz kopiowania: _y_)

[cols="1,1"]
|===

|_dd_
|usunięcie (wycięcie) całego wiersza, 2dd - wycinanie dwóch całych linii (d2d działa tak samo)

|_dl_
|wycinanie jednego znaku pod kursorem

|_dW_
|wycinanie całego słowa, np. d2W - wycinanie dwóch słów

|_dw_
|wycinanie całego słowa (od miejsca kursora) włącznie z białym znakiem (bez usuwania pierwszego znaku następnego słowa)

|_daw_
|(A Word) wycinanie całego słowa (niezależnie w którym miejscu jest kursor) włącznie z białym znakiem na końcu

|_diw_
|(Inner Word) wycinanie słowa bez usuwania białych znaków

|_dąs_
|(A Sentence) wycinanie całego zdania

|_dis_
|(Inner Sentence) wycinanie całego zdania

|_dap_
|(A paragraph) usunięcie całego akapitu

|_de_
|wycinanie całego słowa (od kursora do ostatniego znaku) pozostawiając białe znaki

|_d$_
|wycinanie od bieżącego miejsca do końca wiersza

|_d^_
|wycinanie od pierwszego znaku nie będącego białym znakiem w bieżącym wierszu do bieżącego znaku

|_d0_
|od początku wiersza do bieżącego znaku

|===

=== Cofanie zmian

[cols="1,1"]
|===

|_u_
|(undo) cofa ostatnią zmianę w pliku

|_U_
|przywraca linie do oryginalnego stanu

|_CTRL-R_
|(redo) cofa zmiany włącznie z undo (można wycofać się z undo)

|===

=== Szukanie

[cols="1,1"]
|===

|_f_
|(find) wyszukanie pojedynczego znaku w bieżącym wierszu po bieżącym miejscu. Odmiany tego polecenia opisane wyżej to _F_, _t_ i _T_.

|_;_
|Gdy klawisz ten zostaje wciśnięty po wyszukiwaniu za pomocą _f_, _F_, _t_ i _T_, uruchamia następne wyszukanie w bieżącym wierszu

|_/word_
|wyszukanie w pliku kolejnego wzorca wyrażenia regularnego (wystąpienia 'word')

|_?word_
|wyszukanie w pliku poprzedniego wzorca

|_*_
|wyszukiwanie słowa, na którym właśnie stoi kursor

|_n_
|(next) następne wyszukanie wzorca w pliku

|_N_
|poprzednie wyszukanie wzorca w pliku

|_CTRL-O_
|powrót do miejsca gdzie rozpoczęte zostało wyszukiwanie

|_CTRL-I_
|przejście do przodu

|_/word/b+1_
|wyszukuje 'word' i umieszcza kursor na drugiej pozycji od początku. Oprócz b można używać też innych poleceń: 'e', cyfra oznacza liczbę linii po znalezionym słowie

|_:help pattern.txt_
|więcej pomocy na temat wyszukiwania za pomocą wyrażeń regularnych (Perl). Można też uzych :help usr_27.txt

|===

=== Zastępowanie

Dokładny opis w _:help substitute_
[cols="1,1"]
|===

|_:[rangę]s[ubstitute]/from/to/[flags]_
|Ogólną składnia polecenia do zamiany tekstu 'from' na 'to'. Tę ogólną zasadę można jeszcze bardziej uogólnić - patrz kolejna sekcja o składni poleceń _'ex'_.

|_:s/b/A_
|(substitute) zamiana b na A w bieżącym wierszu (jeden raz)

|_:s/a/A/g_
|zamiana a na A w bieżącym wierszu (wszystkie wystąpienia)

|_:%s/a/A/g_
|zamiana w całym pliku

|_:%s/a/A/gc_
|zamiana w całym pliku z potwierdzeniem każdej zamiany

|_:5,10s/a/A/g_
|zamiana w wierszach od 5 do 10

|_:.,$s/a/A/g_
|zamiana w wierszach od bieżącego do końca pliku

|_5:s/a/A/g_
|zamiana w pięciu wierszach licząc od bieżącego

|===

=== Modyfikatory poleceń w trybie normalnym

[cols="1,1"]
|===

|_{polecenie}!_
|modyfikator polecenia wymuszający jego wykonanie bez zapisania zmian, np. :q! - wyjście z programu z porzuceniem zmian

|_!command_
|wykonanie polecenia w zewnętrznym programie, a dokładnie filtrowanie określonego zakresu wierszy przez ten program, np. _!5Gsort_ sortuje linie od bieżącej do 5 (zauważmy, że po wpisaniu !5G polecenie to jest konwertowane do trybu cmd-line: _:.,/+3!_). Inny przykład wykonania polecenia z powłoki: _:!ls -al_

|_!!date_
|wstawia datę w bieżącym wierszu

|===

== Więcej o poleceniach ex 

Aby znaleźć pomoc o danym poleceniu wystarczy wpisać _:help {polecenie} podając całą jego nazwę lub tylko początek. Można użyć CTRL-D lub <Tab> aby wyświetlić opcje autouzupelniania. Ponowne naciśnięcie <Tab> lub CTRL-P pozwala przewijać pomiędzy opcjami. 

Po wpisaniu : klawisze <Up> i <Down> scrolluja historię komend. Za pomocą symbolu \| można wykonać więcej niż dwie komendy na raz, np. ":w \| !ls" zapisuje plik i wyświetla zawartość bieżącego katalogu.

Szczegółowa pomoc o poleceniach ex znajduje się w pliku _:help cmdline.txt_.

[cols="1,1"]
|===
|_:m+1_
|przesunięcie bieżącego wiersza do podanego miejsca, w tym przypadku o jedną linię w dół.

|_:m10_
|przesunięcie bieżącego wiersza do wiersza o numerze 10.

|_:p5_
|wypisanie bieżącego i czterech kolejnych wierszy na dole ekranu

|_:!python %_
|wykonanie otwartego obecnie skryptu w python. Symbol % symbolizuje nazwę aktywnego pliku.

|_:r 'nazwa'_
|(read) odczytanie pliku 'nazwa' i wstawienie go w bieżącym pliku w pozycji kursora

|_:read !ls_ lub _r! {polecenie}_
|wczytuje wynik polecenia ls do bieżącego pliku

|_:history_
|wyświetlenie historii komend w trybie cmd-line

|_q:_
|otwiera w nowym oknie historię poleceń, gdzie dane polecenie można edytować jak w Vim i uruchamiać

|_:history /_
|wyświetlenie historii wyszukiwań

|_:browse oldfiles_
|wyświetla listę uprzednio edytowanych plików, można podać numer i otworzyć wybrany plik do edycji


|=== 

=== Wielokrotne wykonywanie poleceń

Więcej pomocy w _:help usr_26.txt_ oraz _:help multi-repeat_

[cols="1,1"]
|===

|_._
|powtórzenie ostatniej operacji edycji/kasowania/korekty. *Bardzo* przydatna funkcją do szybkiego ponowienia tej samej komendy skrótem.

|_:[rangę][:]g[lobal]/{pattern}/{command}_
|(global) wyszukanie wzorca pattern i wykonanie w każdym pasującym wierszu polecenia command. W powyższym: 
* znak _:_ pomiędzy zakresem i słowem global jest opcjonalny,
* _Command_ to polecenie w trybie cmd-line. Wydając polecenie _normal_ można zdefiniować polecenie w trybie normalnym. 
* różne przykłady _range_ zostały omówione w sekcji dot. zastępowania (np. % - cały plik),
* _Pattern_ to wyrażenie regularne w odpowiednim dla wersji Vim standardzie (np. POSIX). Więcej: _:help pattern_.

|_:2,20g/txt/normal 0i*_
|Przykład multi-polecenia. W wierszach od 2 do 20 wyszukiwany jest tekst 'txt'. W wierszach, gdzie został on znaleziony wykonywane jest polecenie 0i* - co powoduje wstawienie na początku wiersza znaku '*'.

|_:g/^/m 0_
|^ pasuje do każdego wiersza w pliku a 'm' przesuwa wiersz na początek pliku. W efekcie następuje odwrócenie kolejności wierszy w całym pliku.


|_:g/^$/d_
|usunięcie wszystkich pustych linii z pliku


|===

== Wizualna selekcja. 

W tym trybie wiele poleceń zyskuje nowe znaczenie.

=== Wejście w tryb wizualnej selekcji

[cols="1,1"]
|===

|_v_
|wchodzi w tryb selekcji, po zaznaczeniu tekstu można na nim wykonać polecenie zwykłe lub polecenie ex (np :w nazwa zapisze fragment w pliku nazwa)

|_V_
|tryb selekcji, można zaznaczać całe linie

|_CTRL-V_
|tryb blokowy, w którym zaznacza się prostokątny obszar

|===

=== Edycja w trybie wizualnej selekcji

[cols="1,1"]
|===

|_o/O_
|(other) w trybie wizualnej selekcji powzwala na przejście kursorem na drugi koniec zaznaczonego obszaru

|_I{tekst}_
|w trybie blokowym polecenie pozwala na wstawienie przed blokiem w każdym wierszu tego samego tekstu

|_c{tekst}_
|w trybie blokowym polecenie pozwala na wstawienie zamiast bloku w każdym wierszu tego samego tekstu

|_A{tekst}_
|w trybie blokowym polecenie pozwala na wstawienie za blokiem w każdym wierszu tego samego tekstu

|_~_
|zamiana małych liter na duże i odwrotnie

|_r{a}_
|zamiana każdej litery na {a}

|===

== Polecenia w trybie edycji (tryb Insert). 

W tym trybie można wykonać wiele poleceń za pomocą klawiszy funkcyjnych lub skrótów z CTRL.

[cols="1,1"]
|===

|_CTRL-Left_
|przeskok o całe słowo w lewo (tak samo działa z Shift, w prawo z drugą strzałką)

|_CTRL-Home_
|przeskok na początek pliku

|_CTRL-End_
|przeskok na koniec pliku

|_CTRL-P_
|autouzupelnianie (Vim zgaduje resztę słowa na podstawie innych wpisanych w pliku słów oraz innych plików)

|_CTRL-N_
|autouzupelnianie, ale Vim szuka słów z przodu Inne

|_CTRL-X CTRL-F_
|autouzupelnienie nazwami plików. Inne opcje autouzupelniania są w helpie usr_24.txt

|_CTRL-X CTRL-L_
|autouzupelnianie całymi liniami

|_CTRL-A_
|powtórzenie ostatniej edycji w trybie Insert. Dobry skrót, aby wykonać tę samą modyfikację w wielu miejscach. CTRL-2 (lub CTRL-@) wykonuje to samo i jednocześnie wychodzi z trybu edycji.

|_CTRL-Y_
|kopiuje znak powyżej kursora

|_CTRL-W_
|usunięcie ostatniego napisanego słowa (słowa tuż przed kursorem)

|_CTRL-U_
|usunięcie całego wiersza od początku do miejsca kursora

|_CTRL-V{znaki}_
|pozwala na wstawienie znaków specjalnych. Liczba trzycyfrową (od 000 do 255) pozwala na wpisanie znaków ascii. Wpisując 'x' możemy podać liczbę w układzie szesnastkowym (np. CTRL-V xff - bez spacji w środku) a 'o' - ósemkowym. Podając u lub U możemy wstawić znak Unicode.

|_CTRL-K{znaki}_
|wstawienie symboli. Lista symboli jest dostępna komenda :digraphs. Np. CTRL-K C* produkuje Ξ(ponownie - bez spacji w środku). Inny przykład to CTRL-K Co ©.

|_:CTRL-O{polecenie}_
|pozwala na wykonanie w trybie edycji jednego polecenia z trybu normalnego (bez wychodzenia z trybu edycji).

|===

== Inne polecenia w różnych trybach

=== Polecenia rozpoczynające się od 'g'. 

Polecenia te najczęściej modyfikują znaczenie komendy wymienionej po g. Szczegółową lista jest w pliku index.txt

[cols="1,1"]
|===

|_ga_
|wyświetla wartość ASCII znaku pod kursorem

|_g8_
|wyświetla wartość hex znaku UTF-8 pod kursorem

|_gm_
|przeskoczenie kursorem na środek ekranu

|_gM_
|przeskoczenie kursorem na środek bieżącej linii

|_{N}{"x}gp_
|(put) wstawienie N razy tekstu że schowka (lub rejestru {x}, jeśli podany)

|===

=== Formatowanie tekstu

[cols="1,1"]
|===

|_:set textwidth={x}_
|ustawienie szerokości linii. Jeśli nowe słowo spowoduje że linia będzie dłuższa niż maksimum, zostanie wstawiony znak nowej linii

|_gqap_
|uporządkowanie akapitu tak aby w każdej linii znalazło się maksimum słów względem dostępnej szerokości linii

|_gq}_
|jw.

|_:{zakres}center {szerokość}_
|wyśrodkowanie tekstu w liniach opisanych zakresem. {szerokość} opisuje szerokość linii użyta do wyśrodkowania

|_:{zakres}right {szerokość}_
|jw. ale dosunięcie tekstu do prawej

|_:{zakres}left {margines}_
|jw ale dosunięcie do lewej. Margines określa liczbę spacji po lewej stronie tekstu.

|_:8,15le4_
|przykład jak wciąć tekst z 4 spacjami na początku każdego wiersza od nr 8 do 15

|===

=== Znaki (marks)

Oznaczenia pozwalające definiować zakres pliku lub miejsca do których można przeskoczyć. Znaki nie są widzialne, są tylko pozycjami w pliku. Znaki i rejestry nie są przechowywane w tym samym miejscu, można mieć jednocześnie znak a i rejestr 'a' - są czymś innym

[cols="1,1"]
|===

|_m{t}_
|wstawienie znacznika 't' w bieżącej pozycji. Znaczniki można nazywać małymi lub dużymi literami

|_'{t}_
|przejście do pozycji znacznika 't'

|_:marks_
|wyświetla listę aktywnych znaków, przede wszystkich znaków globalnych (o numerach 0-9), które są tworzone przy każdym wyjściu z Vim

|_'0_
|przejście do miejsca, gdzie ostatnio Vim został zamknięty

|_:delm {marks}_
|usunięcie znaku

|_'< '>_
|początek i koniec zakresu wizualnej selekcji

|===

=== Rejestry

Pozwalają zapisać fragment tekstu do przeklejenia lub wykonać ten tekst jako polecenie. Rejestry użytkownika oznaczane są małymi literami. Użycie dużej litery pozwala na doklejenie kolejnego tekstu do istniejącego rejestru. Oprócz tych rejestrów istnieją też rejestry wbudowane.

Więcej w pliku pomocy change.txt - _:help registers_
[cols="1,1"]
|===

|_"{x}_
|Użyj rejestru 'x' do następnej czynności (takiej jak 'd', 'y' lub 'p')

|_"{x}y{ruch}_
|skopiuj do rejestru 'x' wynik następnego ruchu; np. _"ay$_ kopiuje do rejestru 'a' tekst do końca linii

|_"{x}{tekst}_
|pozwala na wycinanie i wklejanie fragmentów tekstów do rejestrów (w miejscu {x} można użyć dowolnej litery

|_"ayas_
|skopiowanie całego bieżącego zdania do rejestru 'a'

|_"ap_
|wklejenie zawartości rejestru 'a' w bieżącym miesjcu

|_CTRL-R{x}_
|w trybie edycji wstawienie zawartości rejestru {x}

|===

=== Makra

Umożliwia zapisanie sekwencji poleceń i wykonanie ich wielokrotnie, przez np. 10@a

[cols="1,1"]
|===

|_q{a}{sekw}q_
|zapisanie sekwencji klawiszy 'sekw' w rejestrze 'a'

|_@{a}_
|wykonanie sekwencji klawiszy zapisanej w rejestrze. Sekwencja będzie wykonana w trybie poleceń

|_@@_
|wykonanie poprzedniej sekwencji klawiszy

|===

=== Skróty 

Więcej w pliku *help usr_24.txt*

[cols="1,1"]
|===

|_:iabbrev {skrót} {tekst}_
|pozwala zdefiniować skrót. Wpisanie w tekście (w trybie edycji) skrótu i potem spacji spowoduje zastąpienie skrótu tekstem. Tekst może mieć jedno lub wiele słów. Jeśli na początku lub na końcu tekstu ma być spacja należy zdefiniować ją jako .

|_:iab {skrót} {tekst}_
|krótsza forma polecenia do definiwania skrótu.

|_:abbreviate_
|wyświetla listę zdefiniowanych skrótów

|===

=== Okna

[cols="1,1"]
|===

|_:[v]split 'plik'_
|podzielenie bieżącego okna na dwa; podając opcjonalna nazwę pliku można otworzyć inny plik w drugim oknie; [v] pozwala na podział pionowy

|_:[v]new_
|otwarcie nowego pustego okna

|_CTRL-W w_
|przejście do innego okna

|_CTRL-W hjkl_
|przechodzenie między oknami (lewo, dół, góra, prawo)

|_CTRL-W J_
|przemieszczenie obecnego okna w dół (tak samo pozostałe klawisze - H, K i L)

|_{x}CTRL-W +/-_
|zwiększenie/zmniejszenie wysokości bieżącego okna. Parametr {x} określa o ile linii następuje zmiana

|_:[vertical] resize {x}_
|zmiana rozmiaru bieżącego okna o wartość {x} (w pikselach). Słowo vertical pozwala na pionową zmianę

|_:close_
|zamknięcie bieżącego okna

|_:only_
|zamknięcie wszystkich okien z wyjątkiem bieżącego

|_:qall_
|całkowite wyjście z Vim; analogicznie :wqall

|===

=== Bufory. Praca z plikami

[cols="1,1"]
|===

|_:open 'plik'_
|otwarcie do nowego bufora pliku o nazwie 'plik'

|_:buffers_
|wyświetlenie listy otwartych plików (tak samo działa :ls)

|_:buffer {x}_
|przełączenie się do pliku o numerze {x}; działa też skrót 'b' lub 'bu'

|_:bdel {x}_
|usunięcie z pamięci bufora o numerze {x}

|_:bn_
|(buffer next) edycja następnego otwartego pliku (w pętli)

|_:bp_
|(buffer previous) edycja poprzedniego otwartego pliku

|===

=== Sesje

[cols="1,1"]
|===

|_:mksession 'nazwa'_
|utworzenie sesji o nazwie 'nazwa'; opcjonalnie można użyć skrótu 'mk' zamiast 'mksession'

|_:mksession! 'nazwa'_
|nadpisanie sesji o nazwie 'nazwa'

|_:source 'nazwa'_
|wczytanie sesji o nazwie 'nazwa'

|===

=== Zakładki (tabs)

[cols="1,1"]
|===

_
|:help tabpage.txt pomoc na temat zakładek

|_:tabe_
|(edit) tworzenie nowej zakładki (inaczej tabnew)

|_:tabc_
|(close) zamknięcie aktualnej zakładki

|_:tabn_
|(next) przejście do następnej zakładki

|_:tab {polecenie}_
|wykonuje polecenie w nowej zakładce (np otwarcie pliku pomocy poleceniem help)

|_:tab split_
|otwiera nową zakładkę z tym samym plikiem co bieżący

|_{x]gt_
|przejście do kolejnej zakładki; opcjonalnie x to numer zakładki

|_gT_
|przejście do poprzedniej zakładki

|===

=== Mapowania klawiszy

Vim daje możliwość definiowania mapowań w wielu trybach pracy. Więcej w pliku *:help map.txt*

[cols="1,1"]
|===

|_:map_
|Polecenie bez argumentu wyświetla wszystkie mapowania w trybach: normalnym, wizualnym i operatora. Z jednym argumetem wyświetla mapowanie dla tego klawisza. Z dwoma tworzy nowe mapowanie.

|_:unmap_
|usuwa dane mapowanie

|===

=== Tagi

Pomoc na temat tagów jest dostępna za pomocą polecenia _:help tagsrch_.

[cols="1,1"]
|===

|__
|

|===

=== Przeglądarka plików

[cols="1,1"]
|===

|_:edit ._
|otwiera zawatosc bieżącego katalogu w oknie

|_:Explore 'folder'_
|włączenie przeglądarki określonego katalogu, w tym katalogów sieciowych (ftp)

|_:split ~/_
|dzieli okno na dwa: przeglądarkę plików i puste okno

|_P_
|podgląd wybranego pliku w drugim oknie

|_o_
|horyzontalny podział okien i otwarcie pliku

|_v_
|otwarcie pliku w nowym vertykalnym oknie

|_t_
|otwarcie pliku w nowej zakładce

|_ _
|otwarcie pliku

|_CTRL-O_
|powrót do poprzedniej zawartości okna

|_s_
|zmiana sposobu sortowania

|_i_
|zmiana sposobu wyświetlania plików

|_r_
|odwrócenie kolejności sortowania

|===

== Inne zasoby o Vim

[cols="1,1"]
|===

|_Vim as language_
|https://www.youtube.com/watch?v=wlR5gYd6um0

|_You need to grok vi_
|https://stackoverflow.com/questions/1218390/what-is-your-most-productive-shortcut-with-vim/1220118#1220118

|_Definitive guide to text objects_
|https://blog.carbonfive.com/vim-text-objects-the-definitive-guide/

|===
